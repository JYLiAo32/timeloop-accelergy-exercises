mapping:
  # - target: MainMemory
  #   type: temporal
  #   factors: R=1 P=1 K=1
  #   permutation: PRK
    
  # - target: GlobalBuffer
  #   type: temporal
  #   factors: R=1 P=16 K=16
  #   permutation: PRK
    
  # - target: RegisterFile
  #   type: temporal
  #   factors: R=3 P=1 K=2
  #   permutation: RPK
  - target: MainMemory
    type: temporal
    factors: R=1 P=1 K=1
    permutation: PRK
    
  - target: GlobalBuffer
    type: temporal
    factors: R=1 P=16 K=4
    permutation: PRK
    
  - target: RegisterFile
    type: temporal
    factors: R=3 P=1 K=8
    permutation: RPK
    
    # Bypass
    # 如何理解bypass?
    # 1. Outputs不需要经过GlobalBuffer，直接从MainMemory读入RegisterFile
    # 2. Weights和Inputs不需要经过RegisterFile，直接从GlobalBuffer读入MACC
  - target: GlobalBuffer  
    type: dataspace
    keep:
    - Weights
    - Inputs
    bypass:
    - Outputs

  - target: RegisterFile
    type: dataspace
    keep:
    - Outputs
    bypass:
    - Weights
    - Inputs
